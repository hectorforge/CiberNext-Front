<header class="bg-[#002855] text-white p-4 flex items-center justify-between">
  <div class="flex items-center">
    <a routerLink="/" class="text-white text-xl font-bold">Cibernext</a>
    <h1 class="ml-4 text-xl">{{ curso?.cursoNombre }}</h1>
  </div>


  <div class="flex items-center space-x-4">
    <button class="flex items-center space-x-2">
      <span class="text-sm">Tu progreso</span>
      <span class="bg-white text-[#002855] font-bold rounded-full h-6 w-6 flex items-center justify-center">0%</span>
    </button>
    <button class="bg-white text-[#002855] px-4 py-2 rounded font-semibold">
      Compartir
    </button>
  </div>

</header>

<main class="flex flex-col lg:flex-row min-h-screen bg-gray-100" *ngIf="!loading && !error">
  <!-- VIDEO -->
  <div class="flex-1 p-8">
    <div class="bg-black rounded-lg overflow-hidden mb-6 h-[28rem] flex items-center justify-center text-white">
      <ng-container *ngIf="videoUrl; else noVideo">
        <video controls autoplay class="w-full h-full object-cover">
          <source [src]="videoUrl" type="video/mp4" />
          Tu navegador no soporta la reproducci贸n de video.
        </video>
      </ng-container>
      <ng-template #noVideo>
        <p class="text-gray-400">Selecciona un video para reproducir</p>
      </ng-template>
    </div>

    <!-- Tabs -->
    <div class="bg-white rounded-lg p-6 shadow-md">
      <div class="border-b border-gray-200">
        <!-- <nav class="-mb-px flex space-x-8" aria-label="Tabs">
          <a routerLink="./descripcion" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 
             hover:text-gray-700 hover:border-gray-300">Descripci贸n general</a>
          <a routerLink="./preguntas-respuestas" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 
             hover:text-gray-700 hover:border-gray-300">Preguntas y respuestas</a>
        </nav> -->
        <nav class="-mb-px flex space-x-8" aria-label="Tabs">
          <a (click)="setTab('descripcion')" [class.border-blue-500]="activeTab === 'descripcion'" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 
     hover:text-gray-700 hover:border-gray-300 cursor-pointer">Descripci贸n general</a>
          <a (click)="setTab('preguntas-respuestas')" [class.border-blue-500]="activeTab === 'preguntas-respuestas'"
            class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 
     hover:text-gray-700 hover:border-gray-300 cursor-pointer">Preguntas y respuestas</a>
        </nav>
      </div>
      <div class="mt-6">

        <div class="mt-6">
          <ng-container *ngIf="activeTab === 'preguntas-respuestas' && unidadSeleccionadaId">
            <app-consulta-unidad-aprendizaje [unidadId]="unidadSeleccionadaId"></app-consulta-unidad-aprendizaje>
          </ng-container>

          <ng-container *ngIf="activeTab === 'descripcion'">
            <ng-container *ngIf="activeTab === 'descripcion' && unidadSeleccionadaId">
              <div *ngIf="unidadSeleccionada">
                <h2 class="text-xl font-bold mb-2">{{ unidadSeleccionada.unidadNombre }}</h2>
                <p class="text-gray-700">{{ unidadSeleccionada.unidadDescripcion }}</p>
              </div>
              <div *ngIf="!unidadSeleccionada" class="text-gray-400">
                Selecciona una unidad para ver su descripci贸n.
              </div>
            </ng-container>
          </ng-container>
        </div>

      </div>
    </div>
  </div>

  <!-- SIDEBAR -->
  <div class="w-full lg:w-96 bg-white border-l border-gray-200 shadow-lg p-6">
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-xl font-bold">Contenido del curso</h3>
    </div>
    <div class="space-y-2">
      <details *ngFor="let unidad of curso?.unidades" class="group">
        <summary [class.bg-blue-100]="unidadSeleccionadaId === unidad.unidadId"
          class="flex justify-between items-center p-4 bg-gray-50 hover:bg-gray-100 cursor-pointer rounded-lg"
          (click)="seleccionarUnidad(unidad.unidadId)">
          <span class="font-semibold text-gray-800">{{ unidad.unidadNombre }}</span>
          <svg class="w-5 h-5 transition-transform group-open:rotate-180" fill="none" stroke="currentColor"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </summary>
        <div class="p-4 bg-white border-l-2 border-gray-200">
          <ul class="space-y-2">
            <li *ngFor="let doc of unidad.documentos"
              class="flex items-center text-gray-600 cursor-pointer hover:text-blue-600"
              (click)="doc.tipoDocumentoExtension === 'mp4' ? playVideo(doc.documentoArchivo) : null">
              <span class="mr-2">{{ getIcon(doc.tipoDocumentoExtension) }}</span>
              <span>{{ doc.documentoNombre }}</span>
            </li>
          </ul>
        </div>
      </details>
    </div>
  </div>
</main>

<div *ngIf="loading" class="flex items-center justify-center min-h-screen text-gray-500">
  Cargando curso...
</div>
<div *ngIf="error" class="flex items-center justify-center min-h-screen text-red-500">
  {{ error }}
</div>